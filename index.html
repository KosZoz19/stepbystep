<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <script>
(function () {
  // Налаштування шляхів
  var ROOT_UA = "/ua/";     // українська версія в корені
  var ROOT_PL = "/pl/";  // польська у /pl/

  // Визначити, де ми зараз
  var here = location.pathname.replace(/\/+$/, "") || "/"; // без кінцевих слешів
  var onUA = here.startsWith("/ua"); // корінь
  var onPL = here.startsWith("/pl");

  // Допомога: безпечний редірект без миготіння
  function go(url) { if (location.pathname !== url) location.replace(url); }

  // 1) Пріоритет: query string (для тестів / прямого посилання)
  var qs = new URLSearchParams(location.search);
  var force = (qs.get("lang") || "").toLowerCase();
  if (force === "uk" || force === "pl") {
    localStorage.setItem("sbs_lang", force);
    if (force === "uk" && !onUA) go(ROOT_UA);
    if (force === "pl" && !onPL) go(ROOT_PL);
    return;
  }

  // 2) Другий пріоритет: збережений вибір
  var saved = (localStorage.getItem("sbs_lang") || "").toLowerCase();
  if (saved === "uk") { if (!onUA) go(ROOT_UA); return; }
  if (saved === "pl") { if (!onPL) go(ROOT_PL); return; }

  // 3) Автовизначення: якщо є 'uk' у мовах — українська, інакше польська (дефолт)
  var langs = (navigator.languages && navigator.languages.length
              ? navigator.languages
              : [navigator.language || navigator.userLanguage || ""])
              .map(function (x) { return (x || "").toLowerCase().split("-")[0]; });

  var isUK = langs.indexOf("uk") !== -1;     // українська
  // Якщо хоч один 'uk' — йдемо на укр, інакше дефолт — PL
  if (isUK) {
    if (!onUA) go(ROOT_UA);
  } else {
    if (!onPL) go(ROOT_PL);
  }
})();
</script>
</head>
<body></body>
</html>




